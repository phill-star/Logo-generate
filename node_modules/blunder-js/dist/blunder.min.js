/*! blunder-js v0.4.0 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Client=e():(t.blunder=t.blunder||{},t.blunder.Client=e())}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function r(o){if(e[o])return e[o].exports;var n=e[o]={i:o,l:!1,exports:{}};return t[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,o){r.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=19)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.detectReporter=function(t){return"function"==typeof fetch?"fetch":"function"==typeof XMLHttpRequest?"xhr":"node"},e.errors={unauthorized:new Error("blunder: unauthorized: project id or key are wrong"),ipRateLimited:new Error("blunder: IP is rate limited")}},function(t,e,r){"use strict";function o(t,e){var r={};for(var o in t)r[o]=i(t[o],e);return r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){void 0===e&&(e=64e3);for(var r="",n=0;n<8;n++)if(t.context=o(t.context,n),t.params=o(t.params,n),t.environment=o(t.environment,n),t.session=o(t.session,n),(r=JSON.stringify(t)).length<e)return r;var i=new Error("blunder-js: cannot jsonify notice (length="+r.length+" maxLength="+e+")");throw i.params={json:r.slice(0,Math.floor(e/2))+"..."},i};var n=function(){function t(t){void 0===t&&(t=0),this.maxStringLength=1024,this.maxObjectLength=128,this.maxArrayLength=32,this.maxDepth=8,this.keys=[],this.seen=[],this.maxStringLength=this.maxStringLength>>t||1,this.maxObjectLength=this.maxObjectLength>>t||1,this.maxArrayLength=this.maxArrayLength>>t||1,this.maxDepth=this.maxDepth>>t||1}return t.prototype.truncate=function(t,e,r){if(void 0===e&&(e=""),void 0===r&&(r=0),null===t||void 0===t)return t;switch(typeof t){case"boolean":case"number":case"function":return t;case"string":return this.truncateString(t);case"object":break;default:return String(t)}if(t instanceof String)return this.truncateString(t.toString());if(t instanceof Boolean||t instanceof Number||t instanceof Date||t instanceof RegExp)return t;if(t instanceof Error)return t.toString();if(this.seen.indexOf(t)>=0)return"[Circular "+this.getPath(t)+"]";var o=function(t){return Object.prototype.toString.apply(t).slice("[object ".length,-1)}(t);if(++r>this.maxDepth)return"[Truncated "+o+"]";switch(this.keys.push(e),this.seen.push(t),o){case"Array":return this.truncateArray(t,r);case"Object":return this.truncateObject(t,r);default:var n=this.maxDepth;this.maxDepth=0;var i=this.truncateObject(t,r);return i.__type=o,this.maxDepth=n,i}},t.prototype.getPath=function(t){for(var e=this.seen.indexOf(t),r=[this.keys[e]],o=e;o>=0;o--){var n=this.seen[o];n&&s(n,r[0])===t&&(t=n,r.unshift(this.keys[o]))}return"~"+r.join(".")},t.prototype.truncateString=function(t){return t.length>this.maxStringLength?t.slice(0,this.maxStringLength)+"...":t},t.prototype.truncateArray=function(t,e){var r=0,o=[];for(var n in t){var i=t[n];if(++r>=this.maxArrayLength)break;o.push(this.truncate(i,n,e))}return o},t.prototype.truncateObject=function(t,e){var r=0,o={};for(var n in t){var i=s(t,n);if(void 0!==i&&"function"!=typeof i){if(++r>=this.maxObjectLength)break;o[n]=this.truncate(i,n,e)}}return o},t}();function i(t,e){return new n(e).truncate(t)}function s(t,e){try{return t[e]}catch(t){return}}e.truncate=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=["type","name","src"];function n(t){if(!t)return"";var e=[];if(t.tagName&&e.push(t.tagName.toLowerCase()),t.id&&(e.push("#"),e.push(t.id)),t.className&&(e.push("."),e.push(t.className.split(" ").join("."))),t.getAttribute)for(var r=0,n=o;r<n.length;r++){var i=n[r],s=t.getAttribute(i);s&&e.push("["+i+'="'+s+'"]')}return e.join("")}e.makeEventHandler=function(t){return function(e){var r;try{r=e.target}catch(t){return}if(r){var o={type:e.type};try{o.target=function(t){for(var e=[],r=t;r;){var o=n(r);if(""!==o&&(e.push(o),e.length>10))break;r=r.parentNode}return 0===e.length?String(t):e.reverse().join(" > ")}(r)}catch(t){o.target="<"+t.toString()+">"}t.pushHistory(o)}}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var dom_1=__webpack_require__(2),Historian=function(){function Historian(){var _this=this,p;if(this.historyMaxLen=20,this.notifiers=[],this.errors=[],this.ignoreWindowError=0,this.history=[],this.ignoreNextXHR=0,"object"==typeof window){var self_1=this,oldHandler_1=window.onerror;window.onerror=function(){oldHandler_1&&oldHandler_1.apply(this,arguments),self_1.onerror.apply(self_1,arguments)}}try{p=eval("process")}catch(t){}"object"==typeof p&&"function"==typeof p.on&&(p.on("uncaughtException",function(t){_this.notify(t)}),p.on("unhandledRejection",function(t,e){_this.notify(t)})),"object"==typeof document&&this.dom(),"object"==typeof console&&this.console(),"function"==typeof fetch&&this.fetch(),"undefined"!=typeof XMLHttpRequest&&this.xhr(),"object"==typeof history&&this.location()}return Historian.prototype.registerNotifier=function(t){this.notifiers.push(t);for(var e=0,r=this.errors;e<r.length;e++){var o=r[e];this.notifyNotifiers(o)}this.errors=[]},Historian.prototype.notify=function(t){this.notifiers.length>0?this.notifyNotifiers(t):(this.errors.push(t),this.errors.length>this.historyMaxLen&&(this.errors=this.errors.slice(-this.historyMaxLen)))},Historian.prototype.notifyNotifiers=function(t){for(var e=0,r=this.notifiers;e<r.length;e++){r[e].notify(t)}},Historian.prototype.onerror=function(t,e,r,o,n){this.ignoreWindowError>0||(n?this.notify({error:n,context:{windowError:!0}}):e&&r&&this.notify({error:{message:t,fileName:e,lineNumber:r,columnNumber:o,noStack:!0},context:{windowError:!0}}))},Historian.prototype.ignoreNextWindowError=function(){var t=this;this.ignoreWindowError++,setTimeout(function(){return t.ignoreWindowError--})},Historian.prototype.getHistory=function(){return this.history},Historian.prototype.pushHistory=function(t){this.isDupState(t)?this.lastState.num?this.lastState.num++:this.lastState.num=2:(t.date||(t.date=new Date),this.history.push(t),this.lastState=t,this.history.length>this.historyMaxLen&&(this.history=this.history.slice(-this.historyMaxLen)))},Historian.prototype.isDupState=function(t){if(!this.lastState)return!1;for(var e in t)if("date"!==e&&t[e]!==this.lastState[e])return!1;return!0},Historian.prototype.dom=function(){var t=dom_1.makeEventHandler(this);document.addEventListener("DOMContentLoaded",t),window.addEventListener("load",t),document.addEventListener("click",t),document.addEventListener("keypress",t),window.addEventListener("error",function(e){"error"in e||t(e)},!0)},Historian.prototype.console=function(){for(var t=this,e=function(e){if(!(e in console))return"continue";var r=console[e],o=function(){r.apply(console,arguments),t.pushHistory({type:"log",severity:e,arguments:Array.prototype.slice.call(arguments)})};o.inner=r,console[e]=o},r=0,o=["debug","log","info","warn","error"];r<o.length;r++){e(o[r])}},Historian.prototype.fetch=function(){var t=this,e=fetch;window.fetch=function(r,o){var n={type:"xhr",date:new Date};n.url="string"==typeof r?r:r.url,o&&o.method?n.method=o.method:n.method="GET",t.ignoreNextXHR++,setTimeout(function(){return t.ignoreNextXHR--});var i=e.apply(this,arguments);return i.then(function(e){n.statusCode=e.status,n.duration=(new Date).getTime()-n.date.getTime(),t.pushHistory(n)}),i}},Historian.prototype.xhr=function(){var t=this,e=XMLHttpRequest.prototype.open;XMLHttpRequest.prototype.open=function(r,o,n,i,s){0===t.ignoreNextXHR&&(this.__state={type:"xhr",method:r,url:o}),e.apply(this,arguments)};var r=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(e){var o=this.onreadystatechange;return this.onreadystatechange=function(e){if(4===this.readyState&&this.__state&&t.recordReq(this),o)return o.apply(this,arguments)},this.__state&&(this.__state.date=new Date),r.apply(this,arguments)}},Historian.prototype.recordReq=function(t){var e=t.__state;e.statusCode=t.status,e.duration=(new Date).getTime()-e.date.getTime(),this.pushHistory(e)},Historian.prototype.location=function(){this.lastLocation=document.location.pathname;var t=this,e=window.onpopstate;window.onpopstate=function(r){if(t.recordLocation(document.location.pathname),e)return e.apply(this,arguments)};var r=history.pushState;history.pushState=function(e,o,n){n&&t.recordLocation(n.toString()),r.apply(this,arguments)}},Historian.prototype.recordLocation=function(t){var e=t.indexOf("://");e>=0?t=(e=(t=t.slice(e+3)).indexOf("/"))>=0?t.slice(e):"/":"/"!==t.charAt(0)&&(t="/"+t),this.pushHistory({type:"location",from:this.lastLocation,to:t}),this.lastLocation=t},Historian}();function getHistory(){return exports.historian.getHistory()}exports.default=Historian,exports.historian=new Historian,exports.getHistory=getHistory},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(1),n=r(0),i=0;e.default=function(t,e,r){if(Date.now()/1e3<i)r.reject(n.errors.ipRateLimited);else{var s=e.host+"/api/v1/projects/"+e.projectId+"/problems?key="+e.projectKey,a=o.default(t),u=new XMLHttpRequest;u.open("POST",s,!0),u.timeout=e.timeout,u.onreadystatechange=function(){if(4===u.readyState)if(401!==u.status)if(429!==u.status){if(u.status>=200&&u.status<500){var e=JSON.parse(u.responseText);if(e.id)return t.id=e.id,void r.resolve(t);if(e.error){var o=new Error(e.error);return void r.reject(o)}}var s=u.responseText.trim(),a=new Error("blunder: xhr: unexpected response: code="+u.status+" body='"+s+"'");r.reject(a)}else{r.reject(n.errors.ipRateLimited);var c=u.getResponseHeader("X-RateLimit-Delay");if(!c)return;var p=parseInt(c,10);p>0&&(i=Date.now()/1e3+p)}else r.reject(n.errors.unauthorized)},u.send(a)}}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var jsonify_notice_1=__webpack_require__(1),reporter_1=__webpack_require__(0),request;try{request=eval("require")("request")}catch(t){}var rateLimitReset=0;function report(t,e,r){if(Date.now()/1e3<rateLimitReset)r.reject(reporter_1.errors.ipRateLimited);else{var o=e.host+"/api/v1/projects/"+e.projectId+"/problems?key="+e.projectKey,n=jsonify_notice_1.default(t);request({url:o,method:"POST",body:n,headers:{"content-type":"application/json"},timeout:e.timeout},function(e,o,n){if(e)r.reject(e);else if(o.statusCode)if(401!==o.statusCode)if(429!==o.statusCode){if(o.statusCode>=200&&o.statusCode<500){var i=JSON.parse(n);if(i.id)return t.id=i.id,void r.resolve(t);if(i.error){var s=new Error(i.error);return void r.reject(s)}}n=n.trim();var a=new Error("blunder: node: unexpected response: code="+o.statusCode+" body='"+n+"'");r.reject(a)}else{r.reject(reporter_1.errors.ipRateLimited);var u=o.headers["x-ratelimit-delay"];if(!u)return;var c=void 0;if("string"==typeof u)c=u;else{if(!(u instanceof Array))return;c=u[0]}var p=parseInt(c,10);p>0&&(rateLimitReset=Date.now()/1e3+p)}else r.reject(reporter_1.errors.unauthorized);else r.reject(new Error("blunder: node: statusCode is undefined"))})}}exports.default=report},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(1),n=r(0),i=0;e.default=function(t,e,r){if(Date.now()/1e3<i)r.reject(n.errors.ipRateLimited);else{var s=e.host+"/api/v1/projects/"+e.projectId+"/problems?key="+e.projectKey,a=o.default(t);fetch(s,{method:"POST",body:a}).then(function(e){if(401!==e.status)if(429!==e.status)e.status>=200&&e.status<500?e.json().then(function(e){if(e.id)return t.id=e.id,void r.resolve(t);if(e.error){var o=new Error(e.error);r.reject(o)}}):e.text().then(function(t){var o=new Error("blunder: fetch: unexpected response: code="+e.status+" body='"+t+"'");r.reject(o)});else{r.reject(n.errors.ipRateLimited);var o=e.headers.get("X-RateLimit-Delay");if(!o)return;var s=parseInt(o,10);s>0&&(i=Date.now()/1e3+s)}else r.reject(n.errors.unauthorized)}).catch(function(t){r.reject(t)})}}},function(module,exports,__webpack_require__){"use strict";var myProcess,os;Object.defineProperty(exports,"__esModule",{value:!0});try{myProcess=eval("process"),os=eval("require")("os")}catch(t){}function filter(t){for(var e in os&&(t.context.os=os.type()+"/"+os.release(),t.context.architecture=os.arch(),t.context.hostname=os.hostname()),t.context.platform=myProcess.platform,t.context.rootDirectory||(t.context.rootDirectory=myProcess.cwd()),myProcess.env.NODE_ENV&&(t.context.environment=myProcess.env.NODE_ENV),t.params.process={pid:myProcess.pid,cwd:myProcess.cwd(),execPath:myProcess.execPath,argv:myProcess.argv},["uptime","cpuUsage","memoryUsage"])myProcess[e]&&(t.params.process[e]=myProcess[e]());return os&&(t.params.os={homedir:os.homedir(),uptime:os.uptime(),freemem:os.freemem(),totalmem:os.totalmem(),loadavg:os.loadavg()}),t}exports.default=filter},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){return window.navigator&&window.navigator.userAgent&&(t.context.userAgent=window.navigator.userAgent),window.location&&(t.context.url=String(window.location),t.context.rootDirectory=window.location.protocol+"//"+window.location.host),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=new RegExp(["^","\\[(\\$.+)\\]","\\s","([\\s\\S]+)","$"].join(""));e.default=function(t){var e=t.errors[0];if(""!==e.type&&"Error"!==e.type)return t;var r=e.message.match(o);return null!==r&&(e.type=r[1],e.message=r[2]),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=new RegExp(["^","Uncaught\\s","(.+?)",":\\s","(.+)","$"].join(""));e.default=function(t){var e=t.errors[0];if(""!==e.type&&"Error"!==e.type)return t;var r=e.message.match(o);return null!==r&&(e.type=r[1],e.message=r[2]),t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(){var t,e;return function(r){var o=JSON.stringify(r.errors);return o===t?null:(e&&clearTimeout(e),t=o,e=setTimeout(function(){t=""},1e3),r)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=["Script error","Script error.","InvalidAccessError"];e.default=function(t){var e=t.errors[0];return""===e.type&&-1!==o.indexOf(e.message)?null:e.backtrace&&e.backtrace.length>0&&"<anonymous>"===e.backtrace[0].file?null:t}},function(t,e,r){!function(e,r){"use strict";t.exports=r()}(0,function(){"use strict";function t(t){return!isNaN(parseFloat(t))&&isFinite(t)}function e(t){return t.charAt(0).toUpperCase()+t.substring(1)}function r(t){return function(){return this[t]}}var o=["isConstructor","isEval","isNative","isToplevel"],n=["columnNumber","lineNumber"],i=["fileName","functionName","source"],s=o.concat(n,i,["args"]);function a(t){if(t instanceof Object)for(var r=0;r<s.length;r++)t.hasOwnProperty(s[r])&&void 0!==t[s[r]]&&this["set"+e(s[r])](t[s[r]])}a.prototype={getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(t){if(t instanceof a)this.evalOrigin=t;else{if(!(t instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new a(t)}},toString:function(){return(this.getFunctionName()||"{anonymous}")+("("+(this.getArgs()||[]).join(",")+")")+(this.getFileName()?"@"+this.getFileName():"")+(t(this.getLineNumber())?":"+this.getLineNumber():"")+(t(this.getColumnNumber())?":"+this.getColumnNumber():"")}};for(var u=0;u<o.length;u++)a.prototype["get"+e(o[u])]=r(o[u]),a.prototype["set"+e(o[u])]=function(t){return function(e){this[t]=Boolean(e)}}(o[u]);for(var c=0;c<n.length;c++)a.prototype["get"+e(n[c])]=r(n[c]),a.prototype["set"+e(n[c])]=function(e){return function(r){if(!t(r))throw new TypeError(e+" must be a Number");this[e]=Number(r)}}(n[c]);for(var p=0;p<i.length;p++)a.prototype["get"+e(i[p])]=r(i[p]),a.prototype["set"+e(i[p])]=function(t){return function(e){this[t]=String(e)}}(i[p]);return a})},function(t,e,r){!function(e,o){"use strict";t.exports=o(r(13))}(0,function(t){"use strict";var e=/(^|@)\S+\:\d+/,r=/^\s*at .*(\S+\:\d+|\(native\))/m,o=/^(eval@)?(\[native code\])?$/;return{parse:function(t){if(void 0!==t.stacktrace||void 0!==t["opera#sourceloc"])return this.parseOpera(t);if(t.stack&&t.stack.match(r))return this.parseV8OrIE(t);if(t.stack)return this.parseFFOrSafari(t);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(t.replace(/[\(\)]/g,""));return[e[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(e){return e.stack.split("\n").filter(function(t){return!!t.match(r)},this).map(function(e){e.indexOf("(eval ")>-1&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var r=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),o=this.extractLocation(r.pop()),n=r.join(" ")||void 0,i=["eval","<anonymous>"].indexOf(o[0])>-1?void 0:o[0];return new t({functionName:n,fileName:i,lineNumber:o[1],columnNumber:o[2],source:e})},this)},parseFFOrSafari:function(e){return e.stack.split("\n").filter(function(t){return!t.match(o)},this).map(function(e){if(e.indexOf(" > eval")>-1&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new t({functionName:e});var r=e.split("@"),o=this.extractLocation(r.pop()),n=r.join("@")||void 0;return new t({functionName:n,fileName:o[0],lineNumber:o[1],columnNumber:o[2],source:e})},this)},parseOpera:function(t){return!t.stacktrace||t.message.indexOf("\n")>-1&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)/i,o=e.message.split("\n"),n=[],i=2,s=o.length;i<s;i+=2){var a=r.exec(o[i]);a&&n.push(new t({fileName:a[2],lineNumber:a[1],source:o[i]}))}return n},parseOpera10:function(e){for(var r=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,o=e.stacktrace.split("\n"),n=[],i=0,s=o.length;i<s;i+=2){var a=r.exec(o[i]);a&&n.push(new t({functionName:a[3]||void 0,fileName:a[2],lineNumber:a[1],source:o[i]}))}return n},parseOpera11:function(r){return r.stack.split("\n").filter(function(t){return!!t.match(e)&&!t.match(/^Error created at/)},this).map(function(e){var r,o=e.split("@"),n=this.extractLocation(o.pop()),i=o.shift()||"",s=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0;i.match(/\(([^\)]*)\)/)&&(r=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var a=void 0===r||"[arguments not available]"===r?void 0:r.split(",");return new t({functionName:s,args:a,fileName:n[0],lineNumber:n[1],columnNumber:n[2],source:e})},this)}}})},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=r(14),n="object"==typeof console&&console.warn;function i(t){try{return o.parse(t)}catch(e){n&&t.stack&&console.warn("ErrorStackParser:",e.toString(),t.stack)}return t.fileName?[t]:[]}e.default=function(t,e){var r=[];if(!t.noStack){var o=i(t);if(0===o.length)try{throw new Error("fake")}catch(t){(o=i(t)).shift(),o.shift()}for(var n=0,s=o;n<s.length;n++){var a=s[n];r.push({function:a.functionName||"",file:a.fileName||"",line:a.lineNumber||0,column:a.columnNumber||0})}}e("stacktracejs",{type:t.name?t.name:"",message:t.message?String(t.message):String(t),backtrace:r})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t){this.onResolved=[],this.onRejected=[],t&&t(this.resolve.bind(this),this.reject.bind(this))}return t.prototype.then=function(t,e){return t&&(this.resolvedWith?t(this.resolvedWith):this.onResolved.push(t)),e&&(this.rejectedWith?e(this.rejectedWith):this.onRejected.push(e)),this},t.prototype.catch=function(t){return this.rejectedWith?t(this.rejectedWith):this.onRejected.push(t),this},t.prototype.resolve=function(t){if(this.resolvedWith||this.rejectedWith)throw new Error("Promise is already resolved or rejected");this.resolvedWith=t;for(var e=0,r=this.onResolved;e<r.length;e++){(0,r[e])(t)}return this},t.prototype.reject=function(t){if(this.resolvedWith||this.rejectedWith)throw new Error("Promise is already resolved or rejected");this.rejectedWith=t;for(var e=0,r=this.onRejected;e<r.length;e++){(0,r[e])(t)}return this},t}();e.default=o},function(t,e,r){"use strict";var o=r(16),n=r(15),i=r(12),s=r(11),a=r(10),u=r(9),c=r(8),p=r(7),h=r(0),f=r(6),l=r(5),d=r(4),m=r(3),y=function(){function t(t){void 0===t&&(t={});var e=this;this.opts={},this.reporters=[],this.filters=[],this.offline=!1,this.errors=[],t.projectId&&(this.opts.projectId=t.projectId),t.projectKey&&(this.opts.projectKey=t.projectKey),t.user&&(this.opts.user=t.user),t.environment&&(this.opts.environment=t.environment),t.component&&(this.opts.component=t.component),t.host&&(this.opts.host=t.host),t.timeout&&(this.opts.timeout=t.timeout),this.opts.host=this.opts.host||"https://collector.blunderify.se",this.opts.timeout=this.opts.timeout||1e4,this.opts.component=this.opts.component||"",this.opts.environment=this.opts.environment||"production",this.opts.ignoreWindowError=t.ignoreWindowError,this.processor=t.processor||n.default,this.addReporter(t.reporter||h.detectReporter(t)),this.addFilter(i.default),this.addFilter(s.default()),this.addFilter(a.default),this.addFilter(u.default),"object"==typeof window?(this.addFilter(c.default),"function"==typeof window.addEventListener&&(window.addEventListener("online",this.onOnline.bind(this)),window.addEventListener("offline",function(){return e.offline=!0}))):this.addFilter(p.default),m.historian.registerNotifier(this)}return t.prototype.setProject=function(t,e){this.opts.projectId=t,this.opts.projectKey=e},t.prototype.setHost=function(t){this.opts.host=t},t.prototype.setComponent=function(t){this.opts.component=t},t.prototype.setEnvironment=function(t){this.opts.environment=t},t.prototype.getUser=function(){return this.opts.user},t.prototype.setUser=function(t,e,r){this.opts.user=this.opts.user||{},this.opts.user.id=t,this.opts.user.email=e,this.opts.user.name=r},t.prototype.setUserId=function(t){this.opts.user=this.opts.user||{},this.opts.user.id=t},t.prototype.setUserName=function(t){this.opts.user=this.opts.user||{},this.opts.user.name=t},t.prototype.setUserEmail=function(t){this.opts.user=this.opts.user||{},this.opts.user.email=t},t.prototype.addReporter=function(t){var e;switch(t){case"fetch":e=f.default;break;case"node":e=l.default;break;case"xhr":e=d.default;break;default:e=t}this.reporters.push(e)},t.prototype.addFilter=function(t){this.filters.push(t)},t.prototype.notify=function(t){var e=this;"object"==typeof t&&void 0!==t.error||(t={error:t});var r=t.promise||new o.default;if(!t.error){var n=new Error("blunder-js: got err="+JSON.stringify(t.error)+", wanted an Error");return r.reject(n),r}if(this.opts.ignoreWindowError&&t.context&&t.context.windowError){n=new Error("blunder-js: window error is ignored");return r.reject(n),r}if(this.offline)return t.promise=r,this.errors.push(t),this.errors.length>100&&this.errors.slice(-100),r;var i={id:"",errors:[],context:Object.assign({language:"JavaScript",severity:"error",component:this.opts.component,environment:this.opts.environment,notifier:{name:"blunder-js",version:"0.4.0",url:"https://github.com/blunderify/blunder.js"}},t.context),params:t.params||{},environment:t.environment||{},session:t.session||{}},s=this.getUser();null!=s&&(i.context.user=s);var a=m.getHistory();return a.length>0&&(i.context.history=a),this.processor(t.error,function(t,o){i.errors.push(o);for(var n=0,s=e.filters;n<s.length;n++){var a=(0,s[n])(i);if(null===a)return void r.reject(new Error("blunder-js: error is filtered"));i=a}for(var u=0,c=e.reporters;u<c.length;u++){(0,c[u])(i,e.opts,r)}}),r},t.prototype.wrap=function(t){if(t._blunder)return t;var e=this,r=function(){var r=Array.prototype.slice.call(arguments),o=e.wrapArguments(r);try{return t.apply(this,o)}catch(t){throw e.notify({error:t,params:{arguments:r}}),m.historian.ignoreNextWindowError(),t}};for(var o in t)t.hasOwnProperty(o)&&(r[o]=t[o]);return r._blunder=!0,r.inner=t,r},t.prototype.wrapArguments=function(t){for(var e in t){var r=t[e];"function"==typeof r&&(t[e]=this.wrap(r))}return t},t.prototype.call=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];return this.wrap(t).apply(this,Array.prototype.slice.call(arguments,1))},t.prototype.onerror=function(){m.historian.onerror.apply(m.historian,arguments)},t.prototype.onOnline=function(){this.offline=!1;for(var t=0,e=this.errors;t<e.length;t++){var r=e[t];this.notify(r)}this.errors=[]},t}();t.exports=y},function(t,e){Object.assign||(Object.assign=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];for(var o=function(e){e&&Object.keys(e).forEach(function(r){return t[r]=e[r]})},n=0,i=e;n<i.length;n++){o(i[n])}return t})},function(t,e,r){r(18),t.exports=r(17)}])});
//# sourceMappingURL=blunder.min.js.map